create database Movie_Theater
create table Movies(
ID int primary key,
"Name" nvarchar(300),
Studio nvarchar(200),
Duration time,
Cost float,
"Start" date,
"End" date
)

create table Room(
ID int primary key,
Detail nvarchar(500)
)

create table Slot_Type(
ID int primary key,
"TypeName" varchar(100)
)

create table "Periods"(
ID int primary key,
MovieID int references Movies(ID),
RoomID int references Room(ID),
"Date" date,
BeginTime time,
EndTime time,
)

create table Price(
PeriodID int references "Periods"(ID),
SlotTypeID int references Slot_Type(ID),
Price float,
primary key(PeriodID,SlotTypeID)
)

create table Slots(
ID int,
RoomID int references Room(ID),
TypeID int references Slot_Type(ID),
CONSTRAINT Slots_pk
primary key(ID,RoomID)
)

create table Tickets(
ID int primary key,
PeriodID int references "Periods"(ID),
RoomID int, 
SlotID int,
"Name" nvarchar(200),
BuyTime datetime,
CONSTRAINT Slots_fk
FOREIGN KEY (SlotID, RoomID) REFERENCES Slots(ID, RoomID)
)

Insert into Movies values(1,'PHAP SU MU: AI CHET GIO TAY','17 Production','2:00',100,'11-8-2019','12-8-2019'),
(2,'DOCTOR SLEEP','Warner Bros','2:30',100,'11-8-2019','1-8-2019'),
(3,'KE HUY DIET: VAN MENH DEN TOI','20th century','2:14',100,'11-1-2019','1-1-2019'),
(4,'ĐUA VOI LUA','Paramount','1:40',100,'11-8-2019','12-8-2019'),
(5,'MALEFICENT','The Walt Disney','2:05',100,'10-18-2019','12-18-2019'),
(6,'BAC KIM THANG','ProductionQ','1:30',100,'10-25-2019','11-25-2019'),
(7,'VUNG DAT THAY MA: CÚ BẮN ĐÚP','Colombia','1:35',100,'10-25-2019','11-25-2019'),
(8,'DIEU UOC CUOI CUA ME','A Miljipmoja Entertainment','1:48',100,'10-25-2019','11-25-2019'),
(9,'THU CUNG SIEU QUAY','Galaxy','1:28',100,'10-11-2019','11-11-2019'),
(10,'GIA ĐINH ADDAMS','Universal','1:35',100,'10-25-2019','11-25-2019')

select * from Movies

Insert into Room values(1,''),
(2,''),
(3,''),
(4,''),
(5,''),
(6,''),
(7,''),
(8,''),
(9,'')

Insert into Slot_Type values(1,'Common'),
(2,'VIP'),
(3,'Twin')

Insert into "Periods" values(1,1,1,'11-8-2019','8:00','10:00'),
(2,1,2,'11-8-2019','9:00','11:00'),
(3,2,1,'11-8-2019','10:30','13:00'),
(4,3,4,'11-9-2019','9:00','11:14'),
(5,4,6,'11-9-2019','16:00','17:40'),
(6,5,5,'11-10-2019','20:00','22:05'),
(7,6,3,'11-10-2019','19:30','21:00'),
(8,7,8,'11-11-2019','14:00','15:35'),
(9,8,9,'11-11-2019','15:30','17:18'),
(10,9,7,'11-12-2019','21:00','22:28'),
(11,10,2,'11-12-2019','14:00','15:35')

Insert into Price values(1,1,100),(1,2,120),(1,3,150),
(2,1,100),(2,2,120),(2,3,150),
(3,1,100),(3,2,120),(3,3,150),
(4,1,100),(4,2,120),(4,3,150),
(5,1,100),(5,2,120),(5,3,150),
(6,1,100),(6,2,120),(6,3,150),
(7,1,100),(7,2,120),(7,3,150),
(8,1,100),(8,2,120),(8,3,150),
(9,1,100),(9,2,120),(9,3,150),
(10,1,100),(10,2,120),(10,3,150),
(11,1,100),(11,2,120),(11,3,150)

Insert into Slots values(1,1,1),(2,1,1),(3,1,1),(4,1,1),(5,1,1),(6,1,1),(7,1,1),(8,1,1),(9,1,1),(10,1,1),
(11,1,2),(12,1,2),(13,1,2),(14,1,2),(15,1,2),(16,1,2),(17,1,2),(18,1,2),(19,1,2),(20,1,2),
(21,1,3),(22,1,3),(23,1,3),(24,1,3),(25,1,3),(26,1,3),(27,1,3),(28,1,3),(29,1,3),(30,1,3),
(31,2,1),(32,2,1),(33,2,1),(34,2,1),(35,2,1),(36,2,1),(37,2,1),(38,2,1),(39,2,1),(40,2,1),
(41,2,2),(42,2,2),(43,2,2),(44,2,2),(45,2,2),(46,2,2),(47,2,2),(48,2,2),(49,2,2),(50,2,2),
(51,2,3),(52,2,3),(53,2,3),(54,2,3),(55,2,3),(56,2,3),(57,2,3),(58,2,3),(59,2,3),(60,2,3),
(61,3,1),(62,3,1),(63,3,1),(64,3,1),(65,3,1),(66,3,1),(67,3,1),(68,3,1),(69,3,1),(70,3,1),
(71,3,2),(72,3,2),(73,3,2),(74,3,2),(75,3,2),(76,3,2),(77,3,2),(78,3,2),(79,3,2),(80,3,2),
(81,3,3),(82,3,3),(83,3,3),(84,3,3),(85,3,3),(86,3,3),(87,3,3),(88,3,3),(89,3,3),(90,3,3),
(91,4,1),(92,4,1),(93,4,1),(94,4,1),(95,4,1),(96,4,1),(97,4,1),(98,4,1),(99,4,1),(100,4,1),
(101,4,2),(102,4,2),(103,4,2),(104,4,2),(105,4,2),(106,4,2),(107,4,2),(108,4,2),(109,4,2),(110,4,2),
(111,4,3),(112,4,3),(113,4,3),(114,4,3),(115,4,3),(116,4,3),(117,4,3),(118,4,3),(119,4,3),(120,4,3),
(121,5,1),(122,5,1),(123,5,1),(124,5,1),(125,5,1),(126,5,1),(127,5,1),(128,5,1),(129,5,1),(130,5,1),
(131,5,2),(132,5,2),(133,5,2),(134,5,2),(135,5,2),(136,5,2),(137,5,2),(138,5,2),(139,5,2),(140,5,2),
(141,5,3),(142,5,3),(143,5,3),(144,5,3),(145,5,3),(146,5,3),(147,5,3),(148,5,3),(149,5,3),(150,5,3),
(151,6,1),(152,6,1),(153,6,1),(154,6,1),(155,6,1),(156,6,1),(157,6,1),(158,6,1),(159,6,1),(160,6,1),
(161,6,2),(162,6,2),(163,6,2),(164,6,2),(165,6,2),(166,6,2),(167,6,2),(168,6,2),(169,6,2),(170,6,2),
(171,6,3),(172,6,3),(173,6,3),(174,6,3),(175,6,3),(176,6,3),(177,6,3),(178,6,3),(179,6,3),(180,6,3),
(181,7,1),(182,7,1),(183,7,1),(184,7,1),(185,7,1),(186,7,1),(187,7,1),(188,7,1),(189,7,1),(190,7,1),
(191,7,2),(192,7,2),(193,7,2),(194,7,2),(195,7,2),(196,7,2),(197,7,2),(198,7,2),(199,7,2),(200,7,2),
(201,7,3),(202,7,3),(203,7,3),(204,7,3),(205,7,3),(206,7,3),(207,7,3),(208,7,3),(209,7,3),(210,7,3),
(211,8,1),(212,8,1),(213,8,1),(214,8,1),(215,8,1),(216,8,1),(217,8,1),(218,8,1),(219,8,1),(220,8,1),
(221,8,2),(222,8,2),(223,8,2),(224,8,2),(225,8,2),(226,8,2),(227,8,2),(228,8,2),(229,8,2),(230,8,2),
(231,8,3),(232,8,3),(233,8,3),(234,8,3),(235,8,3),(236,8,3),(237,8,3),(238,8,3),(239,8,3),(240,8,3),
(241,9,1),(242,9,1),(243,9,1),(244,9,1),(245,9,1),(246,9,1),(247,9,1),(248,9,1),(249,9,1),(250,9,1),
(251,9,2),(252,9,2),(253,9,2),(254,9,2),(255,9,2),(256,9,2),(257,9,2),(258,9,2),(259,9,2),(260,9,2),
(261,9,3),(262,9,3),(263,9,3),(264,9,3),(265,9,3),(266,9,3),(267,9,3),(268,9,3),(269,9,3),(270,9,3)
